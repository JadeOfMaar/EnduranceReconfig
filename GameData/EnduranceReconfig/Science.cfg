// situation bits:
// SrfLanded = 1,
// SrfSplashed = 2,
// FlyingLow = 4,
// FlyingHigh = 8,
// InSpaceLow = 16,
// InSpaceHigh = 32

// MB-2 Habitat Assessment Unit
@PART[ENendSciBox]:NEEDS[WildBlueTools]
{
	// !MODULE[ModuleScienceExperiment] {}
	MODULE
	{
		//Adds new conditions needed to complete the experiment
		//Minimum crew, specific situations, required resources, etc.
		//Use this when making a new science part. for experiment slots
		//that are used by WBIExperimentLab, use WBIModuleScienceExperiment instead.
		name = WBIEnhancedExperiment
		experimentID = habcheck
		//Make sure we're initally in a stopped state (default is running)
		isRunning = false
		//Check the part for resources instead of relying upon the science lab.
		checkPartResources = true
		//Don't auto-deploy the experiment on start/update, that is only used for
		//the experiments in a science lab.
		resultsSafetyCheck = false
		//Optional. A decal used to help identify the experiment.
		// decalTransform = logoPanel
		// decalPath = WildBlueIndustries/MOLE/LDEF/Decals/GooStudy

		useStaging = False
		useActionGroups = False
		hideUIwhenUnavailable = True
		xmitDataScalar = 0.1
		dataIsCollectable = False
		interactionRange = 1.2
		rerunnable = False
		resettable = False
		resettableOnEVA = False
		usageReqMaskInternal = 1
		usageReqMaskExternal = 8
	}
	MODULE
	{
		name = WBIEnhancedExperiment
		experimentID = habcheck2
		isRunning = false
		checkPartResources = true
		resultsSafetyCheck = false

		useStaging = False
		useActionGroups = False
		hideUIwhenUnavailable = True
		xmitDataScalar = 0.1
		dataIsCollectable = False
		interactionRange = 1.2
		rerunnable = False
		resettable = False
		resettableOnEVA = False
		usageReqMaskInternal = 1
		usageReqMaskExternal = 8
	}
	RESOURCE
	{
		name = LabTime
		amount = 0
		maxAmount = 850
		isTweakable = false
	}
}
@EXPERIMENT_DEFINITION:HAS[#id[habcheck]]:NEEDS[WildBlueTools]
{
	@title = Habitability Orbital Assessment
	@baseValue = 33 // 10
	@scienceCap = 33 // 5
	// @dataScale = 1
	// @requireAtmosphere = False
	@situationMask = 16 // 63
	@biomeMask = 1 // 7
	requiredResources = LabTime,170;ElectricCharge,200;
	// situations = ORBITING
	techRequired = advScienceTech
	description = It's not enough to wipe off our telescope, point at it, and crunch numbers from the distance every time a nice world with atmosphere comes around. We've got to hang around in low orbit of it and science every photon of daylight out of it to make certain how friendly it can be to kerbalkind.
	!RESULTS {}
	RESULTS
	{
		default = This environment is sorely lacking in aspects that we are hoping for, or too excessive in aspects we would hope against. It would be unwise to settle here but 
		SunInSpace = Don't do this, please. Don't do this.
		KerbinInSpace = Observing our own planet has yielded a bit more novel data than we expected. But the best part is that nothing spontaneously crumbled or blew up!
		MunInSpace = The Mun has so much Alumina in it that it's not funny. Sure there are other things but there's not much we can do if we were forced to depend on only the Mun. Let's move along.
		MinmusInSpace = We thought the Mun was bad... Not only is Minmus worse than it as a candidate for a new homeworld... Its composition is far from that of ice cream. We can't let this information get out.
		EveInSpace = Eve's atmosphere is rather hot and unfavorable. And its surface is extreme but that same atmosphere is far better able to stop any potential asteroid threat, and its composition has a very appealing balance. It will be good to land this experiment. But can we safely do that?
		DunaInSpace = There's almost a poetic nature to these results. Duna's rather short in a few fields, especially where the atmosphere and ecologies are concerned. But it's doing strong in a few others. This knowledge is sufficiently reassuring to those of us who want to colonize Duna, but is still not enough to persaude those of us who do not believe.
		IkeInSpace = We like Ike. We like Ike very much... Except that there is no atmosphere and its gravity is so low. It is still worth our time to run the surface assessment, however.
		JoolInSpace = We'd like to have a word with whoever thought it was a good idea to run this kind of experiment on a gas giant.
		LaytheInSpace = Between Kerbin as we know it, and our expectations of a younger world that could become as Kerbin in a few millenia, Laythe is in pretty great shape. We should land this and science it ASAP!
		TyloInSpace:NEEDS[JNSQ] = Tylo seems very promising, having a decent composition and atmosphere, and seems to have adequate protection from cosmic radiation. Let's pry a little further and land this box.
		LindorInSpace = We'd like to have a word with whoever thought it was a good idea to run this kind of experiment on a gas giant.
		HuygenInSpace = Huygen is pretty... interesting. Lots of useful potential in some industrial arenas but we're not too sure yet that it is homeworld material.
		RigaInSpace = Riga is okay, having a decent composition and atmosphere, but we're fearful of its lack of radiation shielding due to its size and its distance from Lindor. It may yet be worth our time to explore further.
	}
}
EXPERIMENT_DEFINITION:NEEDS[WildBlueTools]
{
	id = habcheck2
	title = Habitability Surface Assessment
	baseValue = 90
	scienceCap = 90
	dataScale = 1
	
	requireAtmosphere = False
	situationMask = 1
	biomeMask = 2
	
	requiredResources = LabTime,850;ElectricCharge,200;
	description = With many sleepless nights, a few ethical pot-holes, and several liters of hot chocolate, we have assembled the single greatest experiment yet known for the sole purpose of creating and observing a small, autonomous bio-dome and seeing how it responds to several choice samples from a planet or moon that we have deemed a great candidate for colonization via the orbital assessment.
	// situations = LANDED
	celestialBodies = Kerbin;Laythe;Eve;Duna;Ike;
	@celestialBodies:NEEDS[JNSQ] ^= :$: Tylo;Lindor;Huygen;Riga;
	
	techRequired = scientificOutposts
	RESULTS
	{
		default = The experiment has consistently produced positive results. We are definitely looking at a great candidate. 
		
		KerbinSrfLanded = We've done well to build up a large database of reference data and trial-run the system. Now let's try another planet.
		EveSrfLanded = Eve's composition is quite wonderful...once we look past the kerosene in several of the ground samples and the extreme ambient heat.
		DunaSrfLanded = Duna has not performed well for us in the unshielded portions of the tests. And even in the shielded tests, mutations and failures have occurred or were projected to occur due to the high presence of radioactive ores in the deep crust.
		IkeSrfLanded = While Ike has no atmosphere to speak of, and exceedinly low gravity, its proximity to Duna compensates well, to some extent, and by itself, Ike is great. But we cannot look past the lack of atmosphere and lack of gravity.
		LaytheSrfLanded = Laythe's volcanism has proven just a bit troublesome but just as we expected, this moon ticks all the boxes. It's a 9 or 9.5 out of 10.
		TyloSrfLanded = Tylo has performed well for us, though with some difficulty on one hand, and some pleasant surprises on the other hand due to its ice world traits and strong ammonia presence.
		HuygenSrfLanded = Huygen scored quite highly with its thick atmosphere and strong ammonia and methane presences. We've observed some unusual new results, and we're excited for what further biology experiments might yield. Just about the only things missing are atmospheric oxygen and more gravity.
		RigaSrfLanded = Riga scored pretty highly with its strong ammonia and methane presences. We've observed some unusual new results and we're excited for what further biology experiments might yield. Sadly, Riga remains far from perfect.		
	}
}
